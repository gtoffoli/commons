{% extends "commons_base.html" %}

{% load staticfiles%}
{% load i18n %}
{% load tinymce_tags %}

{% block head_title %}{% if node %}{% trans "edit learning path node"|capfirst %}: {{ node.label }}{% else %}{% trans "add learning path node"|capfirst %}{% endif %}{% endblock %}

{% block extra_style %}

{% endblock %}

{% block extra_head %}
{% comment %}
	{% tinymce_preview "preview-content" %}
	<link href="/static/commons/jquery/jquery-ui-1-11-4.core-autocomplete.css" type="text/css" media="all" rel="stylesheet" />
	<link href="/static/taggit_live/css/taggit_live.css" type="text/css" media="all" rel="stylesheet" />
	<script type="text/javascript" src="/static/admin/js/jquery.js"></script>
	<script type="text/javascript" src="/static/commons/jquery/jquery-ui-1-11-4.core-autocomplete.js"></script>
	<script type="text/javascript" src="/static/taggit_live/js/taggit_live.js"></script>
{% endcomment %}	

<script type="text/javascript">
{% comment %}
//Copyright: CodePug.com 2009
//Do not REMOVE these comments
//Usage: setReadonly('mySelect');
function setReadonly( selectElementId ){
	var selectElement = document.getElementById(selectElementId);
	if (selectElement){		
		var parent = selectElement.parentElement;
		var textValue = selectElement.options[selectElement.options.selectedIndex].textContent;
		if (!parent){
			parent=selectElement.parentNode;
			textValue = selectElement.options[selectElement.options.selectedIndex].text;
		}
		var input = document.createElement("input");
		input.setAttribute("id",selectElement.id);
		input.setAttribute("type","text");
		input.setAttribute("value",textValue);
		input.setAttribute("class","form-control");
		input.style.background="#eeeeee";
		input.readOnly = true;
		parent.appendChild(input);
	}
	selectElement.style.display="none";
}
{% endcomment %}
function setDisabled( selectElementId){
	if($('select[id="'+selectElementId+'"]').length > 0) {
		var txtValue = $('select[id="'+selectElementId+'"] option:selected').text();
		$("#"+selectElementId).css("display","none");
		$('<input type="text" value="'+txtValue+'" id="'+selectElementId+'_text" class="form-control" disabled>').insertAfter("#"+selectElementId);
	}
}
</script>
{% endblock %}
{% block body_class %}pathnode_edit{% endblock %}
{% block body %}
  <h1>{% if node %}<small>{% trans "edit learning path node"|capfirst %}:</small> {{ node.label }}{% else %}<small>{% trans "add learning path node"|capfirst %}</small>{% endif %}</h1>
  <div class="row">
  <div class="col-xs-12 col-sm-12 col-md-9">
    <form method="post" action="{{ action }}" id="pathnode_edit_form" class="form-horizontal">
    {% csrf_token %}
    {% for field in form.hidden_fields %}{{ field }}{% endfor %}
    {% for field in form.visible_fields %}{% with i=forloop.counter %}
    <div class="form-group">
     <label for="{{ field.name }}" {% if field.field.required %}class="required"{% endif %}>{{ field.label|capfirst}}</label>
      <span class="txt-error">{{ field.errors }}</span>{{ field }}
      {% if field.help_text %}<small id="{{ field.name }}helpBlock" class="help-block">{{ field.help_text }}</small>{% endif %}
    </div>
    {% endwith %}{% endfor %}
    <div class="form-group">
      <button type="submit" name="save" id="save" value="save" class="btn btn-default">{% trans "save"|capfirst %}{% if lp %} {% trans "changes" %}{% endif %}</button>&nbsp;
      <button type="submit" name="continue" id="continue" value="continue" class="btn btn-default">{% trans "save and continue"|capfirst %}</button>&nbsp;
      <button type="submit" name="cancel" id="cancel" value="cancel" class="btn btn-default">{% trans "cancel"|capfirst %} ({% trans "user view" %})</button>
    </div>
    </form>
  </div>
  </div>
{% endblock %}

{% block extra_script %}
{% comment %}{% if node %}{% endcomment %}
<script type="text/javascript">
	{% comment %}
	setReadonly('id_path');
	{% endcomment %}
		setDisabled( 'id_path' )
</script>
{% comment %}{% endif %}{% endcomment %}
{% endblock %}
